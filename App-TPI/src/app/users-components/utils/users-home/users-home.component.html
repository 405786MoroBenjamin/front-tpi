<section class="p-5 pt-0">
<div class="container-fluid p-3 mt-0 pt-0">
    <!-- Tarjeta principal de saludo -->
    <div class="card greeting-container m-2 mb-3 border border-2 rounded shadow-sm">
      <div class="card-body p-3">
        <h1 class="card-title fs-4">{{ greeting }} {{ userName }}! <i class={{icon}}></i></h1>
        <p class="time fs-4">{{ currentTime }}</p>
        <p class="subtitle fs-6">Descubre las últimas novedades de nuestra comunidad.</p>
      </div>
    </div>
  
    <!-- Fila de Clima y Anuncios -->
    <div class="row m-2">
      <!-- Card de Clima y Contactos en la misma columna -->
      <div class="col-md-6 col-sm-12 p-0 pe-2">
        <!-- Card de Clima -->
        <div class="card border border-2 rounded shadow-sm mb-2">
          <div class="card-header custom-header p-2">
            <h3 class="mb-0 fs-5 text-center" style="color: black;">Clima en Potrero de Garay</h3>
          </div>
          <div class="card-body p-3">
            <div class="row">
              <!-- Clima actual -->
              <div class="col-4 text-center">
                <div class="weather-card" *ngIf="weather">
                  <h6 class="text-muted fs-6">Hoy</h6>
                  <img [src]="'http://openweathermap.org/img/w/' + weather.weather[0].icon + '.png'" alt="Clima actual" style="width: 50px;">
                  <h4 class="fs-5">{{weather.main.temp.toFixed(1)}} °C</h4>
                  <p class="weather-description fs-6">{{weather.weather[0].description}}</p>
                  <p class="text-muted fs-6 weather-details">
                    <i class="bi bi-moisture"></i>
                    Humedad: {{weather.main.humidity}}%
                </p>
                </div>
              </div>
  
              <!-- Pronóstico próximos días -->
              <div class="col-4" *ngFor="let day of forecast">
                <div class="weather-card text-center">
                  <h6 class="text-muted fs-6">{{formatDate(day.dt_txt || '')}}</h6>
                  <img [src]="'http://openweathermap.org/img/w/' + day.weather[0].icon + '.png'" alt="Pronóstico" style="width: 50px;">
                  <h4 class="fs-5">{{day.main.temp.toFixed(1)}} °C</h4>
                  <p class="weather-description fs-6">{{day.weather[0].description}}</p>
                  <p class="text-muted fs-6 weather-details">
                    <i class="bi bi-moisture"></i>
                    Humedad {{day.main.humidity}}%
                </p>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Card de Contactos -->
        <div class="card important-numbers-card border border-2 rounded shadow-sm">
          <div class="card-header custom-header p-2">
            <h3 class="mb-0 fs-5 text-center" style="color: black;">Contactos</h3>
          </div>
          <div class="card-body p-3">
            <p class="fs-6"><i class="bi bi-telephone-fill me-2"></i>(03546) 15 51 19 55</p>
            <p class="fs-6"><i class="bi bi-telephone-fill me-2"></i>(03546) 15 51 19 54</p>
          </div>
        </div>
      </div>
  
      <!-- Card de Anuncios -->
      <div class="col-md-6 col-sm-12 p-0 ps-2">
        <div class="card border border-2 rounded shadow-sm">
          <div class="card-header custom-header p-2">
            <h3 class="mb-0 fs-5 text-center" style="color: black;">Últimas Notificaciones Generales</h3>
          </div>
          <div class="card-body p-3">
            <!-- Recorre las notificaciones y muestra cada una -->
            <div *ngFor="let notification of notifications" class="announcement-item">
              <h5>{{ notification.subject }}</h5>
              <p class="fs-6">{{ notification.message }}</p>
              <small class="fs-6">Publicado el {{ formatDateToDDMM(notification.created_datetime) }}</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>