<section class="container p-5 border rounded border-3 border-secundary" style="min-height: 70vh;">
    <h3>Editar Propietario</h3>
    <form [formGroup]="editOwner" (ngSubmit)="updateOwner(editOwner)">
     
         <!-- Nombre y Apellido -->
         <div class="row mb-4">
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label pe-0" style="margin: 0;">Nombre</label>
                    <div class="col-8">
                        <input type="text" class="form-control" formControlName="name"
                            [ngClass]="onValidate('name')">
                        
                            <div class="invalid-feedback">{{ showError("name") }}</div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label">Apellido</label>
                    <div class="col-8">
                        <input type="text" class="form-control" formControlName="lastname"
                            [ngClass]="onValidate('lastname')">
                            
                        <div class="invalid-feedback">{{ showError("lastname") }}</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- DNI Y CUIL - CUIT -->
        <div class="row mb-4">
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label pe-0" style="margin: 0;">DNI</label>
                    <div class="col-8">
                        <input type="text" class="form-control custom-input" formControlName="dni"
                        [ngClass]="onValidate('dni')">
                        
                        <div class="invalid-feedback">{{ showError("dni") }}</div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label">CUIT - CUIL</label>
                    <div class="col-8">
                        <input type="text" class="form-control custom-input" formControlName="cuitCuil"
                            [ngClass]="onValidate('cuitCuil')">

                        <div class="invalid-feedback">{{ showError("cuitCuil") }}</div>
                    </div>
                </div>
            </div>
        </div>


                <!-- Fecha de nacimiento y Empresa -->
                <div class="row mb-4">
                    <div class="col">
                        <div class="row">
                            <label class="col-2 text-start form-label pe-0" style="margin: 0;">Fecha de nacimiento</label>
                            <div class="col-8">
                                <input type="date" class="form-control custom-input" formControlName="birthdate"
                                [ngClass]="onValidate('birthdate')">
                                
                                <div class="invalid-feedback">{{ showError("birthdate") }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="row">
                            <label class="col-2 text-start form-label">Empresa</label>
                            <div class="col-8">
                                <input type="text" class="form-control custom-input" formControlName="bussinesName">
                            </div>
                        </div>
                    </div>
                </div>


    <!-- Estado fiscal y Tipo de propietario -->
    <div class="row mb-4">
        <div class="col">
            <div class="row">
                <label class="col-2 text-start form-label pe-0" style="margin: 0;">Estado fiscal</label>
                <div class="col-8">
                    <input type="text" class="form-control custom-input" formControlName="taxStatus"
                    [ngClass]="onValidate('taxStatus')">
                
                    <div class="invalid-feedback">{{ showError("taxStatus") }}</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="row">
                <label class="col-2 text-start form-label">Tipo de propietario</label>
                <div class="col-8">
                    <input type="text" class="form-control custom-input" formControlName="ownerType"
                    [ngClass]="onValidate('ownerType')">
                   
                    <div class="invalid-feedback">{{ showError("ownerType") }}</div>
                </div>
            </div>
        </div>
    </div>


        <!-- Telefono y Email -->
        <div class="row mb-4">
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label pe-0" style="margin: 0;">Tel√©fono</label>
                    <div class="col-8">
                        <input type="text" class="form-control custom-input" formControlName="phoneNumber"
                        [ngClass]="onValidate('phoneNumber')">
                        
                        <div class="invalid-feedback">{{ showError("phoneNumber") }}</div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="row">
                    <label class="col-2 text-start form-label">Email</label>
                    <div class="col-8">
                        <input type="text" class="form-control custom-input" formControlName="email"
                        [ngClass]="onValidate('email')">

                        <div class="invalid-feedback">{{ showError("email") }}</div>
                    </div>
                </div>
            </div>
        </div>

        
            <div class="col-lg-6 mb-3">
                <div class="row">
                  <label class="col-2 col-form-label">Subir Archivos</label>
                  <div class="col-10">
                    <input type="file" class="form-control" multiple formControlName="file" [ngClass]="onValidate('file')"
                      (change)="onFileChange($event)">
                    <div class="invalid-feedback">{{showError('file')}}</div>
                    <!-- Listado de archivos -->
                    <div class="list-group mt-3">
                      @for (file of newFiles; track $index) {
                      <div class="list-group-item d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                          <i class="bi-file-earmark-text me-3 text-primary fs-5"></i>
                          <span>{{file.name.length > 40 ? file.name.slice(0, 40)+'...' :
                            file.name}}</span>
                        </div>
                        <span>{{ (file.size / (1024 * 1024)).toFixed(2) }} MB</span>
                      </div>
                      }
                    </div>
                  </div>
                </div>
              </div>
        
        <!-- <div *ngFor="let e of existingFilesDownload; let i = index">
            <span>{{ e.name }}</span>
            <button (click)="downloadFile(e.uuid)" class="btn btn-primary">
              Descargar
            </button>
        </div>  -->

        <div class="row mb-3 justify-content-end sticky-right">
            <div class="col-auto">
                <button type="button" class="btn btn-secondary me-3" (click)="confirmExit()">Cancelar</button>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary" [disabled]="!editOwner.valid">Guardar</button>
            </div>
        </div>
    </form>
</section>