<section
  class="container p-5 border rounded border-3 border-secundary"
  style="min-height: 70vh"
>
  <h3>Editar Propietario</h3>
  <form [formGroup]="editOwner" (ngSubmit)="updateOwner(editOwner)">
    <!-- Nombre y Apellido -->
    <div class="row mb-4">
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label pe-0" style="margin: 0"
            >Nombre</label
          >
          <div class="col-8">
            <input
              type="text"
              class="form-control"
              formControlName="name"
              [ngClass]="onValidate('name')"
            />

            <div class="invalid-feedback">{{ showError("name") }}</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label">Apellido</label>
          <div class="col-8">
            <input
              type="text"
              class="form-control"
              formControlName="lastname"
              [ngClass]="onValidate('lastname')"
            />

            <div class="invalid-feedback">{{ showError("lastname") }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- DNI Y CUIL - CUIT -->
    <div class="row mb-4">
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label pe-0" style="margin: 0"
            >DNI</label
          >
          <div class="col-8">
            <input
              type="text"
              class="form-control custom-input"
              formControlName="dni"
              [ngClass]="onValidate('dni')"
            />

            <div class="invalid-feedback">{{ showError("dni") }}</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label">CUIT - CUIL</label>
          <div class="col-8">
            <input
              type="text"
              class="form-control custom-input"
              formControlName="cuitCuil"
              [ngClass]="onValidate('cuitCuil')"
            />

            <div class="invalid-feedback">{{ showError("cuitCuil") }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Fecha de nacimiento y Empresa -->
    <div class="row mb-4">
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label pe-0" style="margin: 0"
            >Fecha de nacimiento</label
          >
          <div class="col-8">
            <input
              type="date"
              class="form-control custom-input"
              formControlName="birthdate"
              [ngClass]="onValidate('birthdate')"
            />

            <div class="invalid-feedback">{{ showError("birthdate") }}</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label">Empresa</label>
          <div class="col-8">
            <input
              type="text"
              class="form-control custom-input"
              formControlName="bussinesName"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Estado fiscal y Tipo de propietario -->
    <div class="row mb-4">
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label pe-0" style="margin: 0"
            >Estado fiscal</label
          >
          <div class="col-8">
            <select
              id="selectOption"
              class="form-select"
              formControlName="taxStatus"
              [ngClass]="onValidate('taxStatus')"
            >
              @for (s of states; track $index) {
              <option value="{{ s.id }}">{{ s.description }}</option>
              }
            </select>
            <div class="invalid-feedback">{{ showError("taxStatus") }}</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label">Tipo de propietario</label>
          <div class="col-8">
            <select
              id="selectOption"
              class="form-select"
              formControlName="ownerType"
              [ngClass]="onValidate('ownerType')"
            >
              @for (t of types; track $index) {
              <option value="{{ t.id }}">{{ t.description }}</option>
              }
            </select>

            <div class="invalid-feedback">{{ showError("ownerType") }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Telefono y Email -->
    <div class="row mb-4">
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label pe-0" style="margin: 0"
            >Tel√©fono</label
          >
          <div class="col-8">
            <input
              type="text"
              class="form-control custom-input"
              formControlName="phoneNumber"
              [ngClass]="onValidate('phoneNumber')"
            />

            <div class="invalid-feedback">{{ showError("phoneNumber") }}</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="row">
          <label class="col-2 text-start form-label">Email</label>
          <div class="col-8">
            <input
              type="text"
              class="form-control custom-input"
              formControlName="email"
              [ngClass]="onValidate('email')"
            />

            <div class="invalid-feedback">{{ showError("email") }}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-6">
      <app-file-upload
        (filesChange)="getFiles($event)"
        [filesLoaded]="existingFiles"
      />
    </div>
    <!-- <div *ngFor="let e of existingFilesDownload; let i = index">
            <span>{{ e.name }}</span>
            <button (click)="downloadFile(e.uuid)" class="btn btn-primary">
              Descargar
            </button>
        </div>  -->

    <div class="row mb-3 justify-content-end sticky-right">
      <div class="col-auto">
        <button
          type="button"
          class="btn btn-secondary me-3"
          (click)="confirmExit()"
        >
          Cancelar
        </button>
      </div>
      <div class="col-auto">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!editOwner.valid"
        >
          Guardar
        </button>
      </div>
    </div>
  </form>
</section>
